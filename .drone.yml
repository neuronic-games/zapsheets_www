---
kind: pipeline
name: lint & test
steps:
  - name: php syntax check
    image: neuronicgames/zapsheets-dev
    commands:
      - for f in $(find /drone -name '*.php'); do php -l "$f"; done
  - name: run playwright tests
    image: neuronicgames/zapsheets-dev
    commands:
      - php -S 0.0.0.0:8000 &
      - composer.phar test
